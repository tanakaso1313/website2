<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Shop handcrafted furniture and lighting by So Tanaka Studio. Contemporary Japanese design pieces made in Tokyo.">
    <meta name="keywords" content="Japanese designer furniture, handcrafted Japanese furniture, contemporary Japanese design, artisanal lighting Tokyo, Japanese design studio, emerging Japanese designer, liminal design, sculptural lighting Japan, VNSH lamp, Liminal Lamp, Tokyo designer, modern Japanese furniture">
    <meta name="author" content="So Tanaka">
    <meta property="og:title" content="Shop Handcrafted Furniture - So Tanaka Design Studio">
    <meta property="og:description" content="Shop handcrafted furniture and lighting by So Tanaka Studio. Contemporary Japanese design pieces made in Tokyo.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://sotanaka.com/shop.html">
    <meta property="og:image" content="https://sotanaka.com/images/social/shop-social.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <link rel="canonical" href="https://sotanaka.com/shop.html">
    <title>Shop Handcrafted Japanese Furniture - So Tanaka Studio Tokyo</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="shop.css">
    <script src="https://js.stripe.com/v3/"></script>
</head>
<body>
    <div class="sidebar">
        <header>
            <h1><a href="index.html">S O  T A N A K A</a></h1>
        </header>
        <nav>
            <div class="category-nav">
                <a href="index.html?filter=all" data-filter="all">ALL</a>
                <a href="index.html?filter=furniture" data-filter="furniture">FURNITURE</a>
                <a href="index.html?filter=light" data-filter="light">LIGHT</a>
                <a href="index.html?filter=other" data-filter="other">OTHER</a>
                <a href="bio.html">BIO</a>
                <a href="shop.html">SHOP</a>
            </div>
        </nav>
    </div>
    <div class="top-images"></div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const topImagesContainer = document.querySelector('.top-images');
             fetch('/products.json')
                 .then(response => {
                     if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(products => {
                    products.forEach(product => {
                        const productItem = document.createElement('div');
                        productItem.classList.add('product-item');
                        let linkStart = product.page ? `<a href="${product.page}">` : '';
                        let linkEnd = product.page ? '</a>' : '';
                        productItem.innerHTML = `
                            ${linkStart}
                                <img src="${product.image}" alt="${product.name}">
                                <h3>${product.name}</h3>
                                 <p>${product.price}</p>
                             ${linkEnd}
                             <button class="buy-button" data-product-id="${product.id}">Buy</button>
                         `;
                         topImagesContainer.appendChild(productItem);
                     });
 
                     document.querySelectorAll('.buy-button').forEach(button => {
                         button.addEventListener('click', (event) => {
                             const productId = event.target.dataset.productId;
                             const stripe = Stripe('pk_test_51PLa3DJIeY9a2L7s20L3b234n0Y3b234n0Y3b234n0Y3b234n0Y3b234n0Y3b234n0Y3b234n0Y3b234n0Y3b234n0Y3b234n0Y3b234n'); // Replace with your actual publishable key
 
                             fetch('/create-checkout-session', {
                                 method: 'POST',
                                 headers: {
                                     'Content-Type': 'application/json',
                                 },
                                 body: JSON.stringify({ productId: productId }),
                             })
                             .then(response => response.json())
                             .then(session => {
                                 return stripe.redirectToCheckout({ sessionId: session.id });
                             })
                             .then(result => {
                                 if (result.error) {
                                     alert(result.error.message);
                                 }
                             })
                             .catch(error => {
                                 console.error('Error:', error);
                             });
                         });
                     });
                })
                .catch(error => {
                    console.error('Error fetching or processing products:', error);
                });
        });
    </script>
    <div class="legal-policy">
        <a href="legal.html">LEGAL POLICY</a>
    </div>
</body>
</html>
